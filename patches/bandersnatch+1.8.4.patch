diff --git a/node_modules/bandersnatch/lib/autocompleter.js b/node_modules/bandersnatch/lib/autocompleter.js
index f135968..eb09f92 100644
--- a/node_modules/bandersnatch/lib/autocompleter.js
+++ b/node_modules/bandersnatch/lib/autocompleter.js
@@ -13,20 +13,9 @@ class Autocompleter {
     completions(argv) {
         return this.yargsCompletions(argv);
     }
-    yargsCompletions(argv) {
-        return new Promise((resolve, reject) => {
-            const yargs = this.program.createYargsInstance();
-            // yargs.getCompletion() doesn't work for our use case.
-            yargs.parse(['$0', '--get-yargs-completions', '$0', ...argv], {}, (err, argv, output) => {
-                // We don't use yargs 17 promise style argv
-                if ((0, utils_1.isPromise)(argv)) {
-                    throw new Error('argv is of unexpected type');
-                }
-                if (argv.getYargsCompletions) {
-                    resolve(output ? output.split('\n') : []);
-                }
-            });
-        });
+    async yargsCompletions(argv) {
+        const yargs = this.program.createYargsInstance();
+        return yargs.getCompletion(argv);
     }
 }
 exports.Autocompleter = Autocompleter;
diff --git a/node_modules/bandersnatch/lib/program.js b/node_modules/bandersnatch/lib/program.js
index 79d5528..b785e7e 100644
--- a/node_modules/bandersnatch/lib/program.js
+++ b/node_modules/bandersnatch/lib/program.js
@@ -76,6 +76,9 @@ class Program extends events_1.EventEmitter {
         // Non-configurable options
         yargs.recommendCommands();
         yargs.strict();
+        yargs.parserConfiguration({
+            'strip-dashed': true
+        });
         yargs.demandCommand();
         // Hidden completion command
         yargs.completion('completion', false);
